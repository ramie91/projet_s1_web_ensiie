{{ define "create_expense.html" }}
  {{ template "base" . }}
{{ end }}

{{ define "create_expense_content" }}
<section class="max-w-4xl mx-auto space-y-6">
  <div class="flex items-center justify-between">
    <h1 class="text-3xl font-semibold text-slate-800">Créer une dépense</h1>
    <a class="text-sm font-medium text-blue-600 hover:text-blue-700" href="/expenses">Retour</a>
  </div>

  {{ if .error }}
    <div class="rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
      {{ .error }}
    </div>
  {{ end }}

  <!-- Formulaire de création -->
  <form id="expense-form" class="space-y-4" method="post" action="/expenses" novalidate>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-4">
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-slate-700" for="title">Titre</label>
        <input id="title" name="Title" type="text" required class="mt-1 w-full rounded-md border border-slate-300 p-2"
               placeholder="Ex: Pizza, Uber…" />
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700" for="amount">Montant</label>
        <input id="amount" name="Amount" type="number" step="0.01" min="0" required
               class="mt-1 w-full rounded-md border border-slate-300 p-2" placeholder="0.00" />
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700" for="currency">Devise</label>
        <select id="currency" name="Currency" class="mt-1 w-full rounded-md border border-slate-300 p-2" required>
          <option value="EUR" selected>EUR</option>
          <option value="USD">USD</option>
          <option value="GBP">GBP</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700" for="category">Catégorie</label>
        <select id="category" name="Category" class="mt-1 w-full rounded-md border border-slate-300 p-2" required>
          <option value="Logement">Logement</option>
          <option value="Alimentation">Alimentation</option>
          <option value="Transport">Transport</option>
          <option value="Sante">Santé & Bien-être</option>
          <option value="Loisirs">Loisirs & Culture</option>
          <option value="Education">Éducation & Formation</option>
          <option value="Achats">Achats divers</option>
          <option value="Impots">Impôts & Services financiers</option>
          <option value="Famille">Famille & Cadeaux</option>
          <option value="Autres">Autres / Divers</option>
        </select>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-slate-700" for="date">Date d'achat</label>
        <input id="date" name="DateAchat" type="date"
               class="mt-1 w-full rounded-md border border-slate-300 p-2"
               value="{{ .today }}" />
      </div>
    </div>
    <div class="flex items-center justify-end gap-3">
      <button id="reset-form" type="reset" class="rounded-md border border-slate-300 px-3 py-2 text-slate-700 hover:bg-slate-50">
        Réinitialiser
      </button>
      <button id="submit-expense" type="submit" class="rounded-md bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700">
        Ajouter
      </button>
    </div>
  </form>
</section>
<div id="create-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
  <div id="create-modal-overlay" class="absolute inset-0 bg-slate-900/60"></div>
  <div class="relative w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-xl">
    <div class="px-6 py-5 sm:px-8">
      <div class="flex items-start gap-3">
        <div class="flex h-12 w-12 flex-none items-center justify-center rounded-full bg-blue-100 text-blue-600">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0 3.75h.008v.008H12v-.008zM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
          </svg>
        </div>
        <div class="space-y-2">
          <h2 class="text-lg font-semibold text-slate-900">Valider la dépense ?</h2>
          <p class="text-sm text-slate-600">Confirmez la création de cette dépense. Elle sera ajoutée à votre liste.</p>
        </div>
      </div>
    </div>
    <div class="flex flex-col gap-3 border-t border-slate-100 bg-slate-50 px-6 py-4 sm:flex-row sm:justify-end sm:px-8">
      <button id="cancel-create" type="button" class="inline-flex items-center justify-center rounded-md border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-white focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2">Annuler</button>
      <button id="confirm-create" type="button" class="inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2">Valider</button>
    </div>
  </div>
</div>
<script src="/static/js/create_expenses.js"></script>
{{ end }}
